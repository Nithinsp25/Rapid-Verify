<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify News - RapidVerify</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        /* Verification Page Specific Styles */
        .verify-tabs {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-xl);
            background: rgba(0, 0, 0, 0.2);
            padding: var(--space-sm);
            border-radius: var(--radius-lg);
        }
        
        .verify-tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-family: var(--font-primary);
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
        }
        
        .verify-tab:hover { background: rgba(255, 255, 255, 0.05); color: var(--text-primary); }
        .verify-tab.active { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: var(--bg-primary); }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Article Preview */
        .article-preview {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
            border-left: 4px solid var(--primary);
        }
        
        .article-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }
        
        .article-meta {
            display: flex;
            gap: var(--space-lg);
            margin-bottom: var(--space-md);
            flex-wrap: wrap;
        }
        
        .article-meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .article-meta-item i { color: var(--primary); }
        
        .article-content {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }
        
        /* Source Credibility Badge */
        .source-credibility {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .source-credibility.tier1 { background: rgba(107, 203, 119, 0.2); color: var(--success); }
        .source-credibility.tier2 { background: rgba(0, 245, 212, 0.2); color: var(--primary); }
        .source-credibility.tier3 { background: rgba(255, 217, 61, 0.2); color: var(--warning); }
        .source-credibility.unknown { background: rgba(255, 255, 255, 0.1); color: var(--text-muted); }
        
        /* Verification Sources Section */
        .verification-sources {
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--glass-border);
        }
        
        .sources-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--space-lg);
        }
        
        .sources-title i { color: var(--primary); }
        
        .source-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        
        .source-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            transition: var(--transition-base);
        }
        
        .source-item:hover { background: rgba(0, 0, 0, 0.3); }
        
        .source-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 245, 212, 0.1);
            border-radius: var(--radius-sm);
            color: var(--primary);
            flex-shrink: 0;
        }
        
        .source-info { flex: 1; }
        
        .source-name {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }
        
        .source-rating {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .source-rating.false { background: rgba(255, 107, 107, 0.2); color: var(--danger); }
        .source-rating.true { background: rgba(107, 203, 119, 0.2); color: var(--success); }
        .source-rating.mixed { background: rgba(255, 217, 61, 0.2); color: var(--warning); }
        
        .source-note {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: var(--space-xs);
        }
        
        .source-link {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            margin-top: var(--space-sm);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(0, 245, 212, 0.1);
            border-radius: var(--radius-sm);
            color: var(--primary);
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--transition-fast);
        }
        
        .source-link:hover { background: rgba(0, 245, 212, 0.2); }
        
        /* Warnings Section */
        .warnings-section {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-top: var(--space-lg);
        }
        
        .warnings-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--danger);
            font-weight: 600;
            margin-bottom: var(--space-md);
        }
        
        .warning-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            padding: var(--space-sm) 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .warning-item i { color: var(--danger); margin-top: 3px; }
        
        /* Key Claims */
        .claims-section {
            margin-top: var(--space-lg);
        }
        
        .claims-title {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: var(--space-md);
        }
        
        .claim-item {
            background: rgba(123, 44, 191, 0.1);
            border-left: 3px solid var(--secondary);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* WhatsApp Banner */
        .whatsapp-banner {
            background: linear-gradient(135deg, rgba(37, 211, 102, 0.1), rgba(37, 211, 102, 0.05));
            border: 1px solid rgba(37, 211, 102, 0.3);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-top: var(--space-2xl);
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }
        
        .whatsapp-icon {
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            flex-shrink: 0;
        }
    </style>
</head>
<body class="verify-page">
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <div class="bg-particles" id="particles"></div>

    <nav class="navbar glass-panel">
        <div class="nav-container">
            <a href="/" class="logo">
                <div class="logo-icon"><i class="fas fa-shield-halved"></i></div>
                <span class="logo-text">Rapid<span class="accent">Verify</span></span>
            </a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/verify" class="active">Verify</a></li>
                <li><a href="/dashboard">Dashboard</a></li>
            </ul>
            <div class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span><span></span><span></span>
            </div>
        </div>
    </nav>

    <main class="verify-container">
        <div class="verify-header animate-slide-up">
            <span class="section-badge glass-badge">
                <i class="fas fa-shield-alt"></i> AI-Powered Verification
            </span>
            <h1>Verify <span class="gradient-text">News & Claims</span></h1>
            <p>Paste a news link, WhatsApp forward, or suspicious claim. We'll scrape the content, verify against trusted sources, and show you WHERE we verified it.</p>
        </div>

        <div class="verify-card glass-panel-heavy animate-slide-up delay-1">
            <!-- Verification Type Tabs -->
            <div class="verify-tabs">
                <button class="verify-tab active" data-tab="url">
                    <i class="fas fa-link"></i>
                    <span>News Link</span>
                </button>
                <button class="verify-tab" data-tab="text">
                    <i class="fas fa-comment"></i>
                    <span>Text/Message</span>
                </button>
                <button class="verify-tab" data-tab="image">
                    <i class="fas fa-image"></i>
                    <span>Image</span>
                </button>
            </div>

            <!-- URL Verification Tab (Primary) -->
            <div class="tab-content active" id="tab-url">
                <div class="form-group">
                    <label for="urlInput">
                        <i class="fas fa-newspaper" style="color: var(--primary); margin-right: 8px;"></i>
                        Paste News Article URL
                    </label>
                    <input 
                        type="url" 
                        id="urlInput" 
                        class="neo-input" 
                        placeholder="https://example.com/news-article"
                        style="width: 100%; padding: var(--space-md);"
                    >
                    <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: var(--space-sm);">
                        We'll scrape the article, extract claims, and verify against fact-checking sources.
                    </p>
                </div>
                <button id="verifyUrlBtn" class="neo-btn-primary" style="width: 100%; margin-top: var(--space-md);">
                    <i class="fas fa-search"></i>
                    <span>Verify News Article</span>
                    <div class="btn-loader"></div>
                </button>
            </div>

            <!-- Text Verification Tab -->
            <div class="tab-content" id="tab-text">
                <div class="form-group">
                    <label for="textInput">
                        <i class="fas fa-comment-dots" style="color: var(--primary); margin-right: 8px;"></i>
                        Paste WhatsApp Forward / Claim / Message
                    </label>
                    <textarea 
                        id="textInput" 
                        class="claim-input neo-input" 
                        placeholder="Paste the suspicious message, claim, or WhatsApp forward here...

Example:
'URGENT: Government giving free â‚¹10,000 to all citizens! Share to 10 groups to claim. Forward before deleted!'"
                        rows="5"
                    ></textarea>
                </div>
                <button id="verifyTextBtn" class="neo-btn-primary" style="width: 100%; margin-top: var(--space-md);">
                    <i class="fas fa-check-double"></i>
                    <span>Verify Message</span>
                    <div class="btn-loader"></div>
                </button>
            </div>

            <!-- Image Verification Tab -->
            <div class="tab-content" id="tab-image">
                <div class="form-group">
                    <label>
                        <i class="fas fa-image" style="color: var(--primary); margin-right: 8px;"></i>
                        Paste Image URL
                    </label>
                    <input 
                        type="url" 
                        id="imageUrlInput" 
                        class="neo-input" 
                        placeholder="https://example.com/suspicious-image.jpg"
                        style="width: 100%; padding: var(--space-md);"
                    >
                    <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: var(--space-sm);">
                        We'll analyze the image for manipulation and extract any text for verification.
                    </p>
                </div>
                <button id="verifyImageBtn" class="neo-btn-primary" style="width: 100%; margin-top: var(--space-md);">
                    <i class="fas fa-eye"></i>
                    <span>Analyze Image</span>
                    <div class="btn-loader"></div>
                </button>
            </div>

            <!-- Results Container -->
            <div id="resultContainer" class="result-container hidden" style="margin-top: var(--space-xl); padding-top: var(--space-xl); border-top: 1px solid var(--glass-border);">
            </div>
        </div>

        <!-- WhatsApp Bot Banner -->
        <div class="whatsapp-banner animate-slide-up delay-2">
            <div class="whatsapp-icon">
                <i class="fab fa-whatsapp"></i>
            </div>
            <div>
                <h4 style="color: #25D366; margin-bottom: var(--space-xs);">
                    <i class="fas fa-robot"></i> WhatsApp Bot Available!
                </h4>
                <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: var(--space-sm);">
                    Forward suspicious messages directly to our bot for instant verification!
                </p>
                <p style="font-family: var(--font-mono); background: rgba(37, 211, 102, 0.2); padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-sm); color: #25D366; display: inline-block;">
                    +1 415 523 8886
                </p>
            </div>
        </div>

        <!-- Verification Sources Info -->
        <div class="animate-slide-up delay-3" style="margin-top: var(--space-2xl); text-align: center;">
            <h3 style="margin-bottom: var(--space-lg); color: var(--text-secondary);">
                <i class="fas fa-check-circle" style="color: var(--success);"></i> We Verify Against
            </h3>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: var(--space-md);">
                <span class="glass-badge">Google Fact Check</span>
                <span class="glass-badge">Snopes</span>
                <span class="glass-badge">PolitiFact</span>
                <span class="glass-badge">Alt News India</span>
                <span class="glass-badge">BOOM FactCheck</span>
                <span class="glass-badge">PIB India</span>
                <span class="glass-badge">Reuters</span>
                <span class="glass-badge">WHO</span>
            </div>
        </div>
    </main>

    <footer class="footer" style="margin-top: var(--space-3xl);">
        <div class="container">
            <div class="footer-bottom" style="border-top: none; padding-top: 0;">
                <p>&copy; 2025 RapidVerify. Mumbai Hacks '25</p>
            </div>
        </div>
    </footer>

    <script src="/static/js/app.js"></script>
    <script>
        // Tab switching
        document.querySelectorAll('.verify-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.verify-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`tab-${tab.dataset.tab}`).classList.add('active');
                document.getElementById('resultContainer').classList.add('hidden');
            });
        });

        // Verify URL
        document.getElementById('verifyUrlBtn').addEventListener('click', async () => {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) { alert('Please enter a URL'); return; }
            
            const btn = document.getElementById('verifyUrlBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/verify/url', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url })
                });
                const result = await response.json();
                displayUrlResult(result);
            } catch (error) {
                displayError(error.message);
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });

        // Verify Text
        document.getElementById('verifyTextBtn').addEventListener('click', async () => {
            const text = document.getElementById('textInput').value.trim();
            if (!text) { alert('Please enter text to verify'); return; }
            
            const btn = document.getElementById('verifyTextBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ claim: text })
                });
                const result = await response.json();
                displayTextResult(result);
            } catch (error) {
                displayError(error.message);
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });

        // Verify Image
        document.getElementById('verifyImageBtn').addEventListener('click', async () => {
            const imageUrl = document.getElementById('imageUrlInput').value.trim();
            if (!imageUrl) { alert('Please enter an image URL'); return; }
            
            const btn = document.getElementById('verifyImageBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/verify/image', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image_url: imageUrl })
                });
                const result = await response.json();
                displayImageResult(result);
            } catch (error) {
                displayError(error.message);
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });

        function displayUrlResult(result) {
            const container = document.getElementById('resultContainer');
            container.classList.remove('hidden');
            
            const score = result.score || 0.5;
            const scoreClass = score < 0.4 ? 'low' : score < 0.7 ? 'medium' : 'high';
            const status = result.status || 'investigating';
            const article = result.article || {};
            const sourceCred = result.source_credibility || {};
            
            let html = `
                <div class="verification-display">
                    <!-- Header with Score -->
                    <div class="result-header">
                        <div class="result-status">
                            <div class="status-icon ${status}">
                                <i class="fas ${status === 'verified' ? 'fa-check-circle' : status === 'debunked' ? 'fa-times-circle' : 'fa-question-circle'}"></i>
                            </div>
                            <div class="status-text">
                                <h4>${status === 'verified' ? 'LIKELY AUTHENTIC' : status === 'debunked' ? 'LIKELY FAKE' : 'NEEDS VERIFICATION'}</h4>
                                <span>${result.confidence || 'medium'} confidence</span>
                            </div>
                        </div>
                        <div class="score-display">
                            <span class="score-value ${scoreClass}">${Math.round(score * 100)}%</span>
                            <span class="score-label">Authenticity</span>
                        </div>
                    </div>
                    
                    <!-- Article Preview -->
                    ${article.title ? `
                    <div class="article-preview">
                        <h3 class="article-title">${article.title}</h3>
                        <div class="article-meta">
                            ${article.source ? `<span class="article-meta-item"><i class="fas fa-newspaper"></i> ${article.source}</span>` : ''}
                            ${article.author ? `<span class="article-meta-item"><i class="fas fa-user"></i> ${article.author}</span>` : ''}
                            ${article.date ? `<span class="article-meta-item"><i class="fas fa-calendar"></i> ${article.date}</span>` : ''}
                        </div>
                        ${sourceCred.tier ? `
                        <span class="source-credibility ${sourceCred.tier}">
                            <i class="fas fa-${sourceCred.tier === 'tier1' ? 'check-double' : sourceCred.tier === 'tier2' ? 'check' : 'question'}"></i>
                            ${sourceCred.tier === 'tier1' ? 'Highly Trusted Source' : sourceCred.tier === 'tier2' ? 'Trusted Source' : sourceCred.tier === 'tier3' ? 'Generally Reliable' : 'Unknown Source'}
                        </span>
                        ` : ''}
                        ${article.content ? `<p class="article-content">${article.content.substring(0, 300)}...</p>` : ''}
                    </div>
                    ` : ''}
                    
                    <!-- Verdict -->
                    <div class="result-report" style="margin: var(--space-lg) 0;">
                        <p><strong>Verdict:</strong> ${result.verdict || 'Analysis complete'}</p>
                    </div>
            `;
            
            // Warnings
            if (result.warnings && result.warnings.length > 0) {
                html += `
                    <div class="warnings-section">
                        <div class="warnings-title"><i class="fas fa-exclamation-triangle"></i> Warnings Detected</div>
                        ${result.warnings.map(w => `<div class="warning-item"><i class="fas fa-flag"></i> ${w}</div>`).join('')}
                    </div>
                `;
            }
            
            // Key Claims
            if (result.key_claims && result.key_claims.length > 0) {
                html += `
                    <div class="claims-section">
                        <div class="claims-title"><i class="fas fa-quote-left" style="color: var(--secondary);"></i> Key Claims Extracted</div>
                        ${result.key_claims.map(c => `<div class="claim-item">${typeof c === 'string' ? c : c.claim || c}</div>`).join('')}
                    </div>
                `;
            }
            
            // Verification Sources
            html += `<div class="verification-sources">
                <h3 class="sources-title"><i class="fas fa-search"></i> Verification Sources</h3>
                <p style="color: var(--text-muted); margin-bottom: var(--space-lg); font-size: 0.9rem;">
                    We checked these sources to verify this news:
                </p>
                <div class="source-list">
            `;
            
            // Fact checks
            if (result.fact_checks && result.fact_checks.length > 0) {
                result.fact_checks.forEach(fc => {
                    const hasRating = fc.rating && fc.rating !== 'Unknown';
                    const ratingClass = fc.rating?.toLowerCase().includes('false') ? 'false' : 
                                       fc.rating?.toLowerCase().includes('true') ? 'true' : 'mixed';
                    
                    html += `
                        <div class="source-item">
                            <div class="source-icon"><i class="fas fa-${fc.type === 'manual_search' ? 'search' : 'clipboard-check'}"></i></div>
                            <div class="source-info">
                                <div class="source-name">${fc.source || 'Fact Check'}</div>
                                ${hasRating ? `<span class="source-rating ${ratingClass}">${fc.rating}</span>` : ''}
                                ${fc.claim ? `<div class="source-note">"${fc.claim.substring(0, 100)}..."</div>` : ''}
                                ${fc.note ? `<div class="source-note">${fc.note}</div>` : ''}
                                ${fc.search_url || fc.url ? `
                                    <a href="${fc.search_url || fc.url}" target="_blank" class="source-link">
                                        <i class="fas fa-external-link-alt"></i> ${fc.type === 'manual_search' ? 'Search' : 'View'}
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });
            }
            
            // Cross references
            if (result.cross_references && result.cross_references.length > 0) {
                result.cross_references.forEach(ref => {
                    html += `
                        <div class="source-item">
                            <div class="source-icon" style="background: rgba(107, 203, 119, 0.1); color: var(--success);">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="source-info">
                                <div class="source-name">${ref.source}</div>
                                ${ref.note ? `<div class="source-note">${ref.note}</div>` : ''}
                                ${ref.search_url ? `
                                    <a href="${ref.search_url}" target="_blank" class="source-link">
                                        <i class="fas fa-external-link-alt"></i> Search
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });
            }
            
            html += `</div></div>`;
            
            // Recommendation
            html += `
                <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: rgba(${score < 0.4 ? '255, 107, 107' : score < 0.7 ? '255, 217, 61' : '107, 203, 119'}, 0.1); border-radius: var(--radius-md); text-align: center;">
                    <span style="font-size: 1.5rem; display: block; margin-bottom: var(--space-sm);">
                        ${score < 0.4 ? 'ðŸš«' : score < 0.7 ? 'âš ï¸' : 'âœ…'}
                    </span>
                    <span style="color: ${score < 0.4 ? 'var(--danger)' : score < 0.7 ? 'var(--warning)' : 'var(--success)'}; font-weight: 600; font-size: 1.1rem;">
                        ${score < 0.4 ? 'DO NOT SHARE - Likely Misinformation!' : score < 0.7 ? 'VERIFY before sharing' : 'Appears Credible'}
                    </span>
                </div>
            `;
            
            html += `</div>`;
            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function displayTextResult(result) {
            const container = document.getElementById('resultContainer');
            container.classList.remove('hidden');
            
            const score = result.score || 0.5;
            const scoreClass = score < 0.4 ? 'low' : score < 0.7 ? 'medium' : 'high';
            
            let html = `
                <div class="verification-display">
                    <div class="result-header">
                        <div class="result-status">
                            <div class="status-icon ${result.status}">
                                <i class="fas ${result.status === 'verified' ? 'fa-check-circle' : result.status === 'debunked' ? 'fa-times-circle' : 'fa-question-circle'}"></i>
                            </div>
                            <div class="status-text">
                                <h4>${result.status === 'verified' ? 'LIKELY AUTHENTIC' : result.status === 'debunked' ? 'LIKELY FAKE' : 'NEEDS VERIFICATION'}</h4>
                            </div>
                        </div>
                        <div class="score-display">
                            <span class="score-value ${scoreClass}">${Math.round(score * 100)}%</span>
                            <span class="score-label">Authenticity</span>
                        </div>
                    </div>
                    
                    <div class="result-report" style="margin: var(--space-lg) 0;">
                        <p><strong>Verdict:</strong> ${result.verdict || 'Analysis complete'}</p>
                    </div>
            `;
            
            if (result.warnings && result.warnings.length > 0) {
                html += `
                    <div class="warnings-section">
                        <div class="warnings-title"><i class="fas fa-exclamation-triangle"></i> Red Flags Detected</div>
                        ${result.warnings.map(w => `<div class="warning-item"><i class="fas fa-flag"></i> ${w}</div>`).join('')}
                    </div>
                `;
            }
            
            html += `
                <div class="verification-sources">
                    <h3 class="sources-title"><i class="fas fa-search"></i> Check These Sources</h3>
                    <div class="source-list">
            `;
            
            (result.fact_checks || []).concat(result.cross_references || []).forEach(src => {
                html += `
                    <div class="source-item">
                        <div class="source-icon"><i class="fas fa-search"></i></div>
                        <div class="source-info">
                            <div class="source-name">${src.source}</div>
                            ${src.search_url ? `<a href="${src.search_url}" target="_blank" class="source-link"><i class="fas fa-external-link-alt"></i> Search</a>` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += `</div></div></div>`;
            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function displayImageResult(result) {
            const container = document.getElementById('resultContainer');
            container.classList.remove('hidden');
            
            const score = result.score || 0.5;
            const scoreClass = score < 0.4 ? 'low' : score < 0.7 ? 'medium' : 'high';
            
            let html = `
                <div class="verification-display">
                    <div class="result-header">
                        <div class="result-status">
                            <div class="status-icon ${result.status}">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="status-text">
                                <h4>${result.manipulation_detected ? 'MANIPULATION DETECTED' : score < 0.5 ? 'SUSPICIOUS' : 'APPEARS AUTHENTIC'}</h4>
                            </div>
                        </div>
                        <div class="score-display">
                            <span class="score-value ${scoreClass}">${Math.round(score * 100)}%</span>
                            <span class="score-label">Authenticity</span>
                        </div>
                    </div>
                    
                    ${result.extracted_text ? `
                    <div class="article-preview">
                        <h4 style="margin-bottom: var(--space-sm);">Text Extracted from Image:</h4>
                        <p>${result.extracted_text}</p>
                    </div>
                    ` : ''}
                    
                    ${result.concerns && result.concerns.length > 0 ? `
                    <div class="warnings-section">
                        <div class="warnings-title"><i class="fas fa-exclamation-triangle"></i> Concerns</div>
                        ${result.concerns.map(c => `<div class="warning-item"><i class="fas fa-flag"></i> ${c}</div>`).join('')}
                    </div>
                    ` : ''}
                    
                    <div class="verification-sources">
                        <h3 class="sources-title"><i class="fas fa-search"></i> Manual Verification</h3>
                        <div class="source-list">
                            <div class="source-item">
                                <div class="source-icon"><i class="fab fa-google"></i></div>
                                <div class="source-info">
                                    <div class="source-name">Google Reverse Image Search</div>
                                    <a href="https://images.google.com/" target="_blank" class="source-link">
                                        <i class="fas fa-external-link-alt"></i> Search
                                    </a>
                                </div>
                            </div>
                            <div class="source-item">
                                <div class="source-icon"><i class="fas fa-eye"></i></div>
                                <div class="source-info">
                                    <div class="source-name">TinEye Reverse Image Search</div>
                                    <a href="https://tineye.com/" target="_blank" class="source-link">
                                        <i class="fas fa-external-link-alt"></i> Search
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function displayError(message) {
            const container = document.getElementById('resultContainer');
            container.classList.remove('hidden');
            container.innerHTML = `
                <div style="text-align: center; padding: var(--space-xl); color: var(--danger);">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: var(--space-md);"></i>
                    <p>Error: ${message}</p>
                </div>
            `;
        }
    </script>
</body>
</html>
